---
title: statics-comm.stx
hide:
  - toc
---

# `statics-comm.stx`

:simple-github: [pdmosses/metaborg-poosl/org.metaborg.lang.poosl/trans/statics-comm.stx]

[pdmosses/metaborg-poosl/org.metaborg.lang.poosl/trans/statics-comm.stx]: https://github.com/pdmosses/metaborg-poosl/blob/master/org.metaborg.lang.poosl/trans/statics-comm.stx "The source file on GitHub"

<div class="stx"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
</pre></div></td>
<td class="code"><pre><code><span class="keyword">module</span> <a href="../statics.stx/#statics-comm_5_4" id="statics-comm_0_7" title="Referenced at ../statics.stx line 6"><span class="token sort_Id">statics-comm</span></a>

<span class="keyword">imports</span>
    <a href="../../src-gen/statix/signatures/Poosl-sig.stx/#signatures/Poosl-sig_0_7" id="signatures/Poosl-sig_3_4" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 1"><span class="token sort_Id">signatures/Poosl-sig</span></a>
    <a href="../../src-gen/statix/signatures/Common-sig.stx/#signatures/Common-sig_0_7" id="signatures/Common-sig_4_4" title="Defined at ../../src-gen/statix/signatures/Common-sig.stx line 1"><span class="token sort_Id">signatures/Common-sig</span></a>
    <a href="../statics-opt.stx/#statics-opt_0_7" id="statics-opt_5_4" title="Defined at ../statics-opt.stx line 1"><span class="token sort_Id">statics-opt</span></a>
    <a href="../statics-names.stx/#statics-names_0_7" id="statics-names_6_4" title="Defined at ../statics-names.stx line 1"><span class="token sort_Id">statics-names</span></a>
    <a href="../statics-expr-stat.stx/#statics-expr-stat_0_7" id="statics-expr-stat_7_4" title="Defined at ../statics-expr-stat.stx line 1"><span class="token sort_Id">statics-expr-stat</span></a>
    <a href="../statics-typing.stx/#statics-typing_0_7" id="statics-typing_8_4" title="Defined at ../statics-typing.stx line 1"><span class="token sort_Id">statics-typing</span></a>

<span class="keyword">rules</span> <span class="layout">// === Ports and messages =======</span>

    <a href="../statics.stx/#okPorts_50_8" id="okPorts_12_4" title="Referenced at ../statics.stx line 51, 62"><span class="token sort_Id">okPorts</span></a> <span class="keyword">maps</span> <a href="#okPort_13_4" id="okPort_12_17" title="Defined at line 14"><span class="token sort_Id">okPort</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okPort_12_17" id="okPort_13_4" title="Referenced at line 13, 15"><span class="token sort_Id">okPort</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Port_33_4" id="Port_13_21" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 34"><span class="token sort_Id">Port</span></a></span>
    <a href="#okPort_13_4" id="okPort_14_4" title="Defined at line 14"><span class="token sort_Id">okPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_14_44" id="s_14_11" title="Referenced at line 15"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Port_129_4" id="Port_14_14" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 130"><span class="token sort_Id">Port</span></a><span class="operator">(</span><span class="cons_Var"><a href="#name_14_47" id="name_14_19" title="Referenced at line 15"><span class="token sort_Id">name</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span> <a href="../statics-names.stx/#declarePort_276_4" id="declarePort_14_32" title="Defined at ../statics-names.stx line 277"><span class="token sort_Id">declarePort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_14_11" id="s_14_44" title="Defined at line 15"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_14_19" id="name_14_47" title="Defined at line 15"><span class="token sort_Id">name</span></a></span><span class="operator">).</span>

    <a href="../statics.stx/#okMessageSignatures_51_8" id="okMessageSignatures_16_4" title="Referenced at ../statics.stx line 52"><span class="token sort_Id">okMessageSignatures</span></a> <span class="keyword">maps</span> <a href="#okMessageSignature_17_4" id="okMessageSignature_16_29" title="Defined at line 18"><span class="token sort_Id">okMessageSignature</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okMessageSignature_16_29" id="okMessageSignature_17_4" title="Referenced at line 17, 19, 23"><span class="token sort_Id">okMessageSignature</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageSignature_35_4" id="MessageSignature_17_33" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 36"><span class="token sort_Id">MessageSignature</span></a></span>
    <a href="#okMessageSignature_17_4" id="okMessageSignature_18_4" title="Defined at line 18"><span class="token sort_Id">okMessageSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_19_19" id="s_18_23" title="Referenced at line 20, 21, 22"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageReceiveSignature_131_4" id="MessageReceiveSignature_18_26" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 132"><span class="token sort_Id">MessageReceiveSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#port_19_22" id="port_18_50" title="Referenced at line 20, 22"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_21_39" id="message_18_56" title="Referenced at line 22"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_20_74" id="parameters_18_65" title="Referenced at line 21"><span class="token sort_Id">parameters</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span>
        <a href="../statics-names.stx/#typeOfPort_282_4" id="typeOfPort_19_8" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_18_23" id="s_19_19" title="Defined at line 19"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_18_50" id="port_19_22" title="Defined at line 19"><span class="token sort_Id">port</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#typesParameters_20_26" id="typesParameters_20_9" title="Referenced at line 21, 22"><span class="token sort_Id">typesParameters</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#typesParameters_20_9" id="typesParameters_20_26" title="Defined at line 21"><span class="token sort_Id">typesParameters</span></a></span> <span class="operator">==</span> <a href="#okOptMessageParameterList_27_4" id="okOptMessageParameterList_20_45" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_18_23" id="s_20_71" title="Defined at line 19"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_18_65" id="parameters_20_74" title="Defined at line 19"><span class="token sort_Id">parameters</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#declareReceiveMessage_215_4" id="declareReceiveMessage_21_8" title="Defined at ../statics-names.stx line 216"><span class="token sort_Id">declareReceiveMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_18_23" id="s_21_30" title="Defined at line 19"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_18_50" id="port_21_33" title="Defined at line 19"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_18_56" id="message_21_39" title="Defined at line 19"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../statics-names.stx/#TypeMessage_29_8" id="TypeMessage_21_48" title="Defined at ../statics-names.stx line 30"><span class="token sort_Id">TypeMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#typesParameters_20_9" id="typesParameters_21_60" title="Defined at line 21"><span class="token sort_Id">typesParameters</span></a></span>)</span><span class="operator">).</span>
    <a href="#okMessageSignature_17_4" id="okMessageSignature_22_4" title="Defined at line 18"><span class="token sort_Id">okMessageSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_23_19" id="s_22_23" title="Referenced at line 24, 25, 26"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageSendSignature_132_4" id="MessageSendSignature_22_26" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 133"><span class="token sort_Id">MessageSendSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#port_23_22" id="port_22_47" title="Referenced at line 24, 26"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_25_36" id="message_22_53" title="Referenced at line 26"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_24_74" id="parameters_22_62" title="Referenced at line 25"><span class="token sort_Id">parameters</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span>
        <a href="../statics-names.stx/#typeOfPort_282_4" id="typeOfPort_23_8" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_22_23" id="s_23_19" title="Defined at line 23"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_22_47" id="port_23_22" title="Defined at line 23"><span class="token sort_Id">port</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#typesParameters_24_26" id="typesParameters_24_9" title="Referenced at line 25, 26"><span class="token sort_Id">typesParameters</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#typesParameters_24_9" id="typesParameters_24_26" title="Defined at line 25"><span class="token sort_Id">typesParameters</span></a></span> <span class="operator">==</span> <a href="#okOptMessageParameterList_27_4" id="okOptMessageParameterList_24_45" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_22_23" id="s_24_71" title="Defined at line 23"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_22_62" id="parameters_24_74" title="Defined at line 23"><span class="token sort_Id">parameters</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#declareSendMessage_236_4" id="declareSendMessage_25_8" title="Defined at ../statics-names.stx line 237"><span class="token sort_Id">declareSendMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_22_23" id="s_25_27" title="Defined at line 23"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_22_47" id="port_25_30" title="Defined at line 23"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_22_53" id="message_25_36" title="Defined at line 23"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../statics-names.stx/#TypeMessage_29_8" id="TypeMessage_25_45" title="Defined at ../statics-names.stx line 30"><span class="token sort_Id">TypeMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#typesParameters_24_9" id="typesParameters_25_57" title="Defined at line 25"><span class="token sort_Id">typesParameters</span></a></span>)</span><span class="operator">).</span>

    <a href="#okOptMessageParameterList_20_45" id="okOptMessageParameterList_27_4" title="Referenced at line 21, 25, 29, 30"><span class="token sort_Id">okOptMessageParameterList</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#OptMessageParameterList_36_4" id="OptMessageParameterList_27_40" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 37"><span class="token sort_Id">OptMessageParameterList</span></a></span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../statics-names.stx/#TypeDataClass_18_10" id="TypeDataClass_27_72" title="Defined at ../statics-names.stx line 19"><span class="token sort_Id">TypeDataClass</span></a></span><span class="operator">)</span>
    <a href="#okOptMessageParameterList_27_4" id="okOptMessageParameterList_28_4" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_28_30" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageParameters_133_4" id="MessageParameters_28_33" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 134"><span class="token sort_Id">MessageParameters</span></a><span class="operator">(</span><span class="cons_Var">types</span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="../statics-names.stx/#typeOfDataClasses_79_4" id="typeOfDataClasses_28_61" title="Defined at ../statics-names.stx line 80"><span class="token sort_Id">typeOfDataClasses</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var"><span id="types_28_82" title="Not referenced locally, nor via imports"><span class="token sort_Id">types</span></span></span><span class="operator">).</span>
    <a href="#okOptMessageParameterList_27_4" id="okOptMessageParameterList_29_4" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_29_30" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#NoMessageParameters_134_4" id="NoMessageParameters_29_33" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 135"><span class="token sort_Id">NoMessageParameters</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[].</span>

<span class="keyword">rules</span> <span class="layout">// === Instances and channels =======</span>

    <a href="../statics.stx/#okInstances_62_8" id="okInstances_33_4" title="Referenced at ../statics.stx line 63, 68"><span class="token sort_Id">okInstances</span></a> <span class="keyword">maps</span> <a href="#okInstance_34_4" id="okInstance_33_21" title="Defined at line 35"><span class="token sort_Id">okInstance</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okInstance_33_21" id="okInstance_34_4" title="Referenced at line 34, 36"><span class="token sort_Id">okInstance</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Instance_38_4" id="Instance_34_25" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 39"><span class="token sort_Id">Instance</span></a></span>
    <a href="#okInstance_34_4" id="okInstance_35_4" title="Defined at line 35"><span class="token sort_Id">okInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_36_45" id="s_35_15" title="Referenced at line 37, 38, 39"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Instance_138_4" id="Instance_35_18" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 139"><span class="token sort_Id">Instance</span></a><span class="operator">(</span><span class="cons_Var"><span id="annotationList_35_27" title="Not referenced locally, nor via imports"><span class="token sort_Id">annotationList</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_37_27" id="name_35_43" title="Referenced at line 38"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#class_36_48" id="class_35_49" title="Referenced at line 37"><span class="token sort_Id">class</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#optParameterInstantiations_38_107" id="optParameterInstantiations_35_56" title="Referenced at line 39"><span class="token sort_Id">optParameterInstantiations</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_36_12" id="T_36_9" title="Referenced at line 37, 38, 39"><span class="token sort_Id">T</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_36_9" id="T_36_12" title="Defined at line 37"><span class="token sort_Id">T</span></a></span> <span class="operator">==</span> <a href="../statics-names.stx/#typeOfProcessOrClusterClass_60_4" id="typeOfProcessOrClusterClass_36_17" title="Defined at ../statics-names.stx line 61"><span class="token sort_Id">typeOfProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_35_15" id="s_36_45" title="Defined at line 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#class_35_49" id="class_36_48" title="Defined at line 36"><span class="token sort_Id">class</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#declareInstance_257_4" id="declareInstance_37_8" title="Defined at ../statics-names.stx line 258"><span class="token sort_Id">declareInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_35_15" id="s_37_24" title="Defined at line 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_35_43" id="name_37_27" title="Defined at line 36"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#T_36_9" id="T_37_33" title="Defined at line 37"><span class="token sort_Id">T</span></a></span><span class="operator">),</span>
        <a href="#okInstanceParameters_40_4" id="okInstanceParameters_38_8" title="Defined at line 41"><span class="token sort_Id">okInstanceParameters</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_35_15" id="s_38_29" title="Defined at line 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="#externalScopeOfTypeProcessOrClusterClass_72_4" id="externalScopeOfTypeProcessOrClusterClass_38_32" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_36_9" id="T_38_73" title="Defined at line 37"><span class="token sort_Id">T</span></a></span><span class="operator">),</span> <a href="../statics-opt.stx/#stripOptInstanceParameterList_12_4" id="stripOptInstanceParameterList_38_77" title="Defined at ../statics-opt.stx line 13"><span class="token sort_Id">stripOptInstanceParameterList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#optParameterInstantiations_35_56" id="optParameterInstantiations_38_107" title="Defined at line 36"><span class="token sort_Id">optParameterInstantiations</span></a></span><span class="operator">)).</span>

    <a href="#okInstanceParameters_38_8" id="okInstanceParameters_40_4" title="Referenced at line 39"><span class="token sort_Id">okInstanceParameters</span></a> <span class="keyword">maps</span> <a href="#okInstanceParameter_41_4" id="okInstanceParameter_40_30" title="Defined at line 42"><span class="token sort_Id">okInstanceParameter</span></a><span class="operator">(*,</span> <span class="operator">*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okInstanceParameter_40_30" id="okInstanceParameter_41_4" title="Referenced at line 41, 43"><span class="token sort_Id">okInstanceParameter</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#InstanceParameter_40_4" id="InstanceParameter_41_42" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 41"><span class="token sort_Id">InstanceParameter</span></a></span>
    <a href="#okInstanceParameter_41_4" id="okInstanceParameter_42_4" title="Defined at line 42"><span class="token sort_Id">okInstanceParameter</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_44_40" id="s_42_24" title="Referenced at line 45"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_instance_43_40" id="s_instance_42_27" title="Referenced at line 44"><span class="token sort_Id">s_instance</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#InstanceParameter_141_4" id="InstanceParameter_42_39" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 142"><span class="token sort_Id">InstanceParameter</span></a><span class="operator">(</span><span class="cons_Var"><a href="#name_43_52" id="name_42_57" title="Referenced at line 44"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#expr_44_64" id="expr_42_63" title="Referenced at line 45, 46"><span class="token sort_Id">expr</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_var_43_16" id="T_var_43_9" title="Referenced at line 44, 46"><span class="token sort_Id">T_var</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_var_43_9" id="T_var_43_16" title="Defined at line 44"><span class="token sort_Id">T_var</span></a></span> <span class="operator">==</span> <a href="../statics-names.stx/#typeOfVariable_303_4" id="typeOfVariable_43_25" title="Defined at ../statics-names.stx line 304"><span class="token sort_Id">typeOfVariable</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_instance_42_27" id="s_instance_43_40" title="Defined at line 43"><span class="token sort_Id">s_instance</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_42_57" id="name_43_52" title="Defined at line 43"><span class="token sort_Id">name</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_expr_44_17" id="T_expr_44_9" title="Referenced at line 45, 46"><span class="token sort_Id">T_expr</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_expr_44_9" id="T_expr_44_17" title="Defined at line 45"><span class="token sort_Id">T_expr</span></a></span> <span class="operator">==</span> <a href="../statics-expr-stat.stx/#okExpression_128_4" id="okExpression_44_27" title="Defined at ../statics-expr-stat.stx line 129"><span class="token sort_Id">okExpression</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_42_24" id="s_44_40" title="Defined at line 43"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../statics-names.stx/#TypeDataClassRoot_19_8" id="TypeDataClassRoot_44_43" title="Defined at ../statics-names.stx line 20"><span class="token sort_Id">TypeDataClassRoot</span></a>()</span><span class="operator">,</span> <span class="cons_Var"><a href="#expr_42_63" id="expr_44_64" title="Defined at line 43"><span class="token sort_Id">expr</span></a></span><span class="operator">),</span>
        <span class="keyword">try</span> <span class="operator">{</span> <a href="../statics-typing.stx/#compatibleType_12_4" id="compatibleType_45_14" title="Defined at ../statics-typing.stx line 13"><span class="token sort_Id">compatibleType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_var_43_9" id="T_var_45_29" title="Defined at line 44"><span class="token sort_Id">T_var</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#T_expr_44_9" id="T_expr_45_36" title="Defined at line 45"><span class="token sort_Id">T_expr</span></a></span><span class="operator">)</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">Incompatible type</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#expr_42_63" id="expr_45_78" title="Defined at line 43"><span class="token sort_Id">expr</span></a></span><span class="operator">.</span>

    <a href="../statics.stx/#okChannels_63_8" id="okChannels_47_4" title="Referenced at ../statics.stx line 64, 69"><span class="token sort_Id">okChannels</span></a> <span class="keyword">maps</span> <a href="#okChannel_48_4" id="okChannel_47_20" title="Defined at line 49"><span class="token sort_Id">okChannel</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okChannel_47_20" id="okChannel_48_4" title="Referenced at line 48, 50"><span class="token sort_Id">okChannel</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Channel_42_4" id="Channel_48_24" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 43"><span class="token sort_Id">Channel</span></a></span>
    <a href="#okChannel_48_4" id="okChannel_49_4" title="Defined at line 49"><span class="token sort_Id">okChannel</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_52_24" id="s_49_14" title="Referenced at line 53, 54"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Channel_143_4" id="Channel_49_17" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 144"><span class="token sort_Id">Channel</span></a><span class="operator">(</span><span class="cons_Var"><span id="annotationList_49_25" title="Not referenced locally, nor via imports"><span class="token sort_Id">annotationList</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstanceList_144_4" id="PortInstanceList_49_41" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 145"><span class="token sort_Id">PortInstanceList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#portInstances_50_64" id="portInstances_49_58" title="Referenced at line 51, 53, 54"><span class="token sort_Id">portInstances</span></a></span>)</span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#count_ext_ports_50_26" id="count_ext_ports_50_9" title="Referenced at line 51, 52, 54"><span class="token sort_Id">count_ext_ports</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#count_ext_ports_50_9" id="count_ext_ports_50_26" title="Defined at line 51"><span class="token sort_Id">count_ext_ports</span></a></span> <span class="operator">==</span> <a href="#countExternalPorts_78_4" id="countExternalPorts_50_45" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">(</span><span class="cons_Var"><a href="#portInstances_49_58" id="portInstances_50_64" title="Defined at line 50"><span class="token sort_Id">portInstances</span></a></span><span class="operator">),</span>
        <span class="keyword">try</span> <span class="operator">{</span> <a href="#atMostOne_85_4" id="atMostOne_51_14" title="Defined at line 86"><span class="token sort_Id">atMostOne</span></a><span class="operator">(</span><span class="cons_Var"><a href="#count_ext_ports_50_9" id="count_ext_ports_51_24" title="Defined at line 51"><span class="token sort_Id">count_ext_ports</span></a></span><span class="operator">)</span> <span class="operator">}</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">There should be at most 1 external port</span><span class="operator">],</span>
        <a href="#okPortInstances_61_4" id="okPortInstances_52_8" title="Defined at line 62"><span class="token sort_Id">okPortInstances</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_49_14" id="s_52_24" title="Defined at line 50"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portInstances_49_58" id="portInstances_52_27" title="Defined at line 50"><span class="token sort_Id">portInstances</span></a></span><span class="operator">),</span>
        <a href="#okChannelClosure_55_4" id="okChannelClosure_53_8" title="Defined at line 56"><span class="token sort_Id">okChannelClosure</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_49_14" id="s_53_25" title="Defined at line 50"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portInstances_49_58" id="portInstances_53_28" title="Defined at line 50"><span class="token sort_Id">portInstances</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#count_ext_ports_50_9" id="count_ext_ports_53_43" title="Defined at line 51"><span class="token sort_Id">count_ext_ports</span></a></span><span class="operator">).</span>

    <a href="#okChannelClosure_53_8" id="okChannelClosure_55_4" title="Referenced at line 54, 57, 58"><span class="token sort_Id">okChannelClosure</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstance_43_4" id="PortInstance_55_36" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 44"><span class="token sort_Id">PortInstance</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_IntSort">int</span>
    <a href="#okChannelClosure_55_4" id="okChannelClosure_56_4" title="Defined at line 56"><span class="token sort_Id">okChannelClosure</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_56_21" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="pis_56_24" title="Not referenced locally, nor via imports"><span class="token sort_Id">pis</span></span></span><span class="operator">,</span> 0<span class="operator">).</span>
    <a href="#okChannelClosure_55_4" id="okChannelClosure_57_4" title="Defined at line 56"><span class="token sort_Id">okChannelClosure</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_57_21" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="pis_57_24" title="Not referenced locally, nor via imports"><span class="token sort_Id">pis</span></span></span><span class="operator">,</span> <span class="operator">_).</span>
        <span class="layout">// TODO check unconnected messages</span>
        <span class="layout">// TODO check type compatibility of messages</span>

    <a href="#okPortInstances_52_8" id="okPortInstances_61_4" title="Referenced at line 53"><span class="token sort_Id">okPortInstances</span></a> <span class="keyword">maps</span> <a href="#okPortInstance_62_4" id="okPortInstance_61_25" title="Defined at line 63"><span class="token sort_Id">okPortInstance</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okPortInstance_61_25" id="okPortInstance_62_4" title="Referenced at line 62, 64, 68"><span class="token sort_Id">okPortInstance</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstance_43_4" id="PortInstance_62_29" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 44"><span class="token sort_Id">PortInstance</span></a></span>
    <a href="#okPortInstance_62_4" id="okPortInstance_63_4" title="Defined at line 63"><span class="token sort_Id">okPortInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_64_50" id="s_63_19" title="Referenced at line 65"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#InternalPort_145_4" id="InternalPort_63_22" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 146"><span class="token sort_Id">InternalPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#instanceName_64_53" id="instanceName_63_35" title="Referenced at line 65"><span class="token sort_Id">instanceName</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portName_66_37" id="portName_63_49" title="Referenced at line 67"><span class="token sort_Id">portName</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_instance_64_21" id="T_instance_64_9" title="Referenced at line 65, 66"><span class="token sort_Id">T_instance</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_instance_64_9" id="T_instance_64_21" title="Defined at line 65"><span class="token sort_Id">T_instance</span></a></span> <span class="operator">==</span> <a href="../statics-names.stx/#typeOfInstance_263_4" id="typeOfInstance_64_35" title="Defined at ../statics-names.stx line 264"><span class="token sort_Id">typeOfInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_63_19" id="s_64_50" title="Defined at line 64"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#instanceName_63_35" id="instanceName_64_53" title="Defined at line 64"><span class="token sort_Id">instanceName</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_instance_scope_65_27" id="T_instance_scope_65_9" title="Referenced at line 66, 67"><span class="token sort_Id">T_instance_scope</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_instance_scope_65_9" id="T_instance_scope_65_27" title="Defined at line 66"><span class="token sort_Id">T_instance_scope</span></a></span> <span class="operator">==</span>  <a href="#externalScopeOfTypeProcessOrClusterClass_72_4" id="externalScopeOfTypeProcessOrClusterClass_65_48" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_instance_64_9" id="T_instance_65_89" title="Defined at line 65"><span class="token sort_Id">T_instance</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#typeOfPort_282_4" id="typeOfPort_66_8" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_instance_scope_65_9" id="T_instance_scope_66_19" title="Defined at line 66"><span class="token sort_Id">T_instance_scope</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portName_63_49" id="portName_66_37" title="Defined at line 64"><span class="token sort_Id">portName</span></a></span><span class="operator">).</span>
    <a href="#okPortInstance_62_4" id="okPortInstance_67_4" title="Defined at line 63"><span class="token sort_Id">okPortInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_68_19" id="s_67_19" title="Referenced at line 69"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#ExternalPort_146_4" id="ExternalPort_67_22" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 147"><span class="token sort_Id">ExternalPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#portName_68_22" id="portName_67_35" title="Referenced at line 69"><span class="token sort_Id">portName</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <a href="../statics-names.stx/#typeOfPort_282_4" id="typeOfPort_68_8" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_67_19" id="s_68_19" title="Defined at line 68"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portName_67_35" id="portName_68_22" title="Defined at line 68"><span class="token sort_Id">portName</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span>

    <a href="#externalScopeOfTypeProcessOrClusterClass_38_32" id="externalScopeOfTypeProcessOrClusterClass_72_4" title="Referenced at line 39, 66, 74, 75"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="../statics-names.stx/#TypeProcessOrClusterClass_13_10" id="TypeProcessOrClusterClass_72_47" title="Defined at ../statics-names.stx line 14"><span class="token sort_Id">TypeProcessOrClusterClass</span></a></span> <span class="operator">-&gt;</span> <span class="cons_ScopeSort">scope</span>
    <a href="#externalScopeOfTypeProcessOrClusterClass_72_4" id="externalScopeOfTypeProcessOrClusterClass_73_4" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Op"><a href="../statics-names.stx/#TypeClusterClass_14_8" id="TypeClusterClass_73_45" title="Defined at ../statics-names.stx line 15"><span class="token sort_Id">TypeClusterClass</span></a><span class="operator">(</span><span class="cons_Var">s_external</span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><span id="s_external_73_77" title="Not referenced locally, nor via imports"><span class="token sort_Id">s_external</span></span></span><span class="operator">.</span>
    <a href="#externalScopeOfTypeProcessOrClusterClass_72_4" id="externalScopeOfTypeProcessOrClusterClass_74_4" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Op"><a href="../statics-names.stx/#TypeProcessClass_16_8" id="TypeProcessClass_74_45" title="Defined at ../statics-names.stx line 17"><span class="token sort_Id">TypeProcessClass</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_external_74_62" title="Not referenced locally, nor via imports"><span class="token sort_Id">s_external</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="s_internal_74_74" title="Not referenced locally, nor via imports"><span class="token sort_Id">s_internal</span></span></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var">s_external</span><span class="operator">.</span>

<span class="keyword">rules</span>

    <a href="#countExternalPorts_50_45" id="countExternalPorts_78_4" title="Referenced at line 51, 80, 81, 82, 84"><span class="token sort_Id">countExternalPorts</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstance_43_4" id="PortInstance_78_30" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 44"><span class="token sort_Id">PortInstance</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_IntSort">int</span>
    <a href="#countExternalPorts_78_4" id="countExternalPorts_79_4" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">([])</span> <span class="operator">=</span> 0<span class="operator">.</span>
    <a href="#countExternalPorts_78_4" id="countExternalPorts_80_4" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">([</span><span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#ExternalPort_146_4" id="ExternalPort_80_24" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 147"><span class="token sort_Id">ExternalPort</span></a>(_)</span><span class="operator">|</span><span class="cons_Var"><a href="#Cs_81_36" id="Cs_80_40" title="Referenced at line 82"><span class="token sort_Id">Cs</span></a></span><span class="operator">])</span> <span class="operator">=</span> <span class="cons_Var"><a href="#len_82_8" id="len_80_47" title="Referenced at line 83"><span class="token sort_Id">len</span></a></span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#t_len_81_8" id="t_len_80_55" title="Referenced at line 82"><span class="token sort_Id">t_len</span></a></span><span class="operator">}</span>
        <span class="cons_Var"><a href="#t_len_80_55" id="t_len_81_8" title="Defined at line 81"><span class="token sort_Id">t_len</span></a></span> <span class="operator">==</span> <a href="#countExternalPorts_78_4" id="countExternalPorts_81_17" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">(</span><span class="cons_Var"><a href="#Cs_80_40" id="Cs_81_36" title="Defined at line 81"><span class="token sort_Id">Cs</span></a></span><span class="operator">),</span>
        <span class="cons_Var"><a href="#len_80_47" id="len_82_8" title="Defined at line 81"><span class="token sort_Id">len</span></a></span> <span class="operator">#=</span> <span class="cons_Var">t_len</span> <span class="operator">+</span> 1<span class="operator">.</span>
    <a href="#countExternalPorts_78_4" id="countExternalPorts_83_4" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">([_|</span><span class="cons_Var"><span id="Cs_83_26" title="Not referenced locally, nor via imports"><span class="token sort_Id">Cs</span></span></span><span class="operator">])</span> <span class="operator">=</span> <a href="#countExternalPorts_78_4" id="countExternalPorts_83_33" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">(</span><span class="cons_Var">Cs</span><span class="operator">).</span>
    
    <a href="#atMostOne_51_14" id="atMostOne_85_4" title="Referenced at line 52, 87, 88"><span class="token sort_Id">atMostOne</span></a> <span class="operator">:</span> <span class="cons_IntSort">int</span>
    <a href="#atMostOne_85_4" id="atMostOne_86_4" title="Defined at line 86"><span class="token sort_Id">atMostOne</span></a><span class="operator">(</span>0<span class="operator">).</span>
    <a href="#atMostOne_85_4" id="atMostOne_87_4" title="Defined at line 86"><span class="token sort_Id">atMostOne</span></a><span class="operator">(</span>1<span class="operator">).</span>

</code></pre></td></tr></tbody></table></div>

<div id="modal">
  <div id="modal-content">
    <span id="modal-close">&times;</span>
    <h2 id="modal-h2"></h2>
    <ul id="modal-ul"></ul>
  </div>
</div>
