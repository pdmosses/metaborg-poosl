---
title: statics-comm.stx
hide:
  - toc
---

# `statics-comm.stx`

:simple-github: [pdmosses/metaborg-poosl/org.metaborg.lang.poosl/trans/statics-comm.stx]

[pdmosses/metaborg-poosl/org.metaborg.lang.poosl/trans/statics-comm.stx]: https://github.com/pdmosses/metaborg-poosl/blob/master/org.metaborg.lang.poosl/trans/statics-comm.stx "The source file on GitHub"

<div class="stx"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
</pre></div></td>
<td class="code"><pre><code><span class="keyword">module</span> <a href="../statics.stx/#statics-comm_79_91" id="statics-comm_7_19" title="Referenced at ../statics.stx line 6"><span class="token sort_Id">statics-comm</span></a>

<span class="keyword">imports</span>
    <a href="../../src-gen/statix/signatures/Poosl-sig.stx/#signatures/Poosl-sig_7_27" id="signatures/Poosl-sig_33_53" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 1"><span class="token sort_Id">signatures/Poosl-sig</span></a>
    <a href="../../src-gen/statix/signatures/Common-sig.stx/#signatures/Common-sig_7_28" id="signatures/Common-sig_58_79" title="Defined at ../../src-gen/statix/signatures/Common-sig.stx line 1"><span class="token sort_Id">signatures/Common-sig</span></a>
    <a href="../statics-opt.stx/#statics-opt_7_18" id="statics-opt_84_95" title="Defined at ../statics-opt.stx line 1"><span class="token sort_Id">statics-opt</span></a>
    <a href="../statics-names.stx/#statics-names_7_20" id="statics-names_100_113" title="Defined at ../statics-names.stx line 1"><span class="token sort_Id">statics-names</span></a>
    <a href="../statics-expr-stat.stx/#statics-expr-stat_7_24" id="statics-expr-stat_118_135" title="Defined at ../statics-expr-stat.stx line 1"><span class="token sort_Id">statics-expr-stat</span></a>
    <a href="../statics-typing.stx/#statics-typing_7_21" id="statics-typing_140_154" title="Defined at ../statics-typing.stx line 1"><span class="token sort_Id">statics-typing</span></a>

<span class="keyword">rules</span> <span class="layout">// === Ports and messages =======</span>

    <a href="../statics.stx/#okPorts_2278_2285" id="okPorts_201_208" title="Referenced at ../statics.stx line 51, 62"><span class="token sort_Id">okPorts</span></a> <span class="keyword">maps</span> <a href="#okPort_237_243" id="okPort_214_220" title="Defined at line 14"><span class="token sort_Id">okPort</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okPort_214_220" id="okPort_237_243" title="Referenced at line 13, 15"><span class="token sort_Id">okPort</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Port_528_532" id="Port_254_258" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 34"><span class="token sort_Id">Port</span></a></span>
    <a href="#okPort_237_243" id="okPort_263_269" title="Defined at line 14"><span class="token sort_Id">okPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_303_304" id="s_270_271" title="Referenced at line 15"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Port_4774_4778" id="Port_273_277" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 130"><span class="token sort_Id">Port</span></a><span class="operator">(</span><span class="cons_Var"><a href="#name_306_310" id="name_278_282" title="Referenced at line 15"><span class="token sort_Id">name</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span> <a href="../statics-names.stx/#declarePort_13309_13320" id="declarePort_291_302" title="Defined at ../statics-names.stx line 277"><span class="token sort_Id">declarePort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_270_271" id="s_303_304" title="Defined at line 15"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_278_282" id="name_306_310" title="Defined at line 15"><span class="token sort_Id">name</span></a></span><span class="operator">).</span>

    <a href="../statics.stx/#okMessageSignatures_2314_2333" id="okMessageSignatures_318_337" title="Referenced at ../statics.stx line 52"><span class="token sort_Id">okMessageSignatures</span></a> <span class="keyword">maps</span> <a href="#okMessageSignature_378_396" id="okMessageSignature_343_361" title="Defined at line 18"><span class="token sort_Id">okMessageSignature</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okMessageSignature_343_361" id="okMessageSignature_378_396" title="Referenced at line 17, 19, 23"><span class="token sort_Id">okMessageSignature</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageSignature_562_578" id="MessageSignature_407_423" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 36"><span class="token sort_Id">MessageSignature</span></a></span>
    <a href="#okMessageSignature_378_396" id="okMessageSignature_428_446" title="Defined at line 18"><span class="token sort_Id">okMessageSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_527_528" id="s_447_448" title="Referenced at line 20, 21, 22"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageReceiveSignature_4886_4909" id="MessageReceiveSignature_450_473" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 132"><span class="token sort_Id">MessageReceiveSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#port_530_534" id="port_474_478" title="Referenced at line 20, 22"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_663_670" id="message_480_487" title="Referenced at line 22"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_611_621" id="parameters_489_499" title="Referenced at line 21"><span class="token sort_Id">parameters</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span>
        <a href="../statics-names.stx/#typeOfPort_13499_13509" id="typeOfPort_516_526" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_447_448" id="s_527_528" title="Defined at line 19"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_474_478" id="port_530_534" title="Defined at line 19"><span class="token sort_Id">port</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#typesParameters_563_578" id="typesParameters_546_561" title="Referenced at line 21, 22"><span class="token sort_Id">typesParameters</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#typesParameters_546_561" id="typesParameters_563_578" title="Defined at line 21"><span class="token sort_Id">typesParameters</span></a></span> <span class="operator">==</span> <a href="#okOptMessageParameterList_981_1006" id="okOptMessageParameterList_582_607" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_447_448" id="s_608_609" title="Defined at line 19"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_489_499" id="parameters_611_621" title="Defined at line 19"><span class="token sort_Id">parameters</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#declareReceiveMessage_10464_10485" id="declareReceiveMessage_632_653" title="Defined at ../statics-names.stx line 216"><span class="token sort_Id">declareReceiveMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_447_448" id="s_654_655" title="Defined at line 19"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_474_478" id="port_657_661" title="Defined at line 19"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_480_487" id="message_663_670" title="Defined at line 19"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../statics-names.stx/#TypeMessage_892_903" id="TypeMessage_672_683" title="Defined at ../statics-names.stx line 30"><span class="token sort_Id">TypeMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#typesParameters_546_561" id="typesParameters_684_699" title="Defined at line 21"><span class="token sort_Id">typesParameters</span></a></span>)</span><span class="operator">).</span>
    <a href="#okMessageSignature_378_396" id="okMessageSignature_707_725" title="Defined at line 18"><span class="token sort_Id">okMessageSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_803_804" id="s_726_727" title="Referenced at line 24, 25, 26"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageSendSignature_4986_5006" id="MessageSendSignature_729_749" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 133"><span class="token sort_Id">MessageSendSignature</span></a><span class="operator">(</span><span class="cons_Var"><a href="#port_806_810" id="port_750_754" title="Referenced at line 24, 26"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_936_943" id="message_756_763" title="Referenced at line 26"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_887_897" id="parameters_765_775" title="Referenced at line 25"><span class="token sort_Id">parameters</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span>
        <a href="../statics-names.stx/#typeOfPort_13499_13509" id="typeOfPort_792_802" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_726_727" id="s_803_804" title="Defined at line 23"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_750_754" id="port_806_810" title="Defined at line 23"><span class="token sort_Id">port</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#typesParameters_839_854" id="typesParameters_822_837" title="Referenced at line 25, 26"><span class="token sort_Id">typesParameters</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#typesParameters_822_837" id="typesParameters_839_854" title="Defined at line 25"><span class="token sort_Id">typesParameters</span></a></span> <span class="operator">==</span> <a href="#okOptMessageParameterList_981_1006" id="okOptMessageParameterList_858_883" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_726_727" id="s_884_885" title="Defined at line 23"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parameters_765_775" id="parameters_887_897" title="Defined at line 23"><span class="token sort_Id">parameters</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#declareSendMessage_11539_11557" id="declareSendMessage_908_926" title="Defined at ../statics-names.stx line 237"><span class="token sort_Id">declareSendMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_726_727" id="s_927_928" title="Defined at line 23"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#port_750_754" id="port_930_934" title="Defined at line 23"><span class="token sort_Id">port</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#message_756_763" id="message_936_943" title="Defined at line 23"><span class="token sort_Id">message</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../statics-names.stx/#TypeMessage_892_903" id="TypeMessage_945_956" title="Defined at ../statics-names.stx line 30"><span class="token sort_Id">TypeMessage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#typesParameters_822_837" id="typesParameters_957_972" title="Defined at line 25"><span class="token sort_Id">typesParameters</span></a></span>)</span><span class="operator">).</span>

    <a href="#okOptMessageParameterList_582_607" id="okOptMessageParameterList_981_1006" title="Referenced at line 21, 25, 29, 30"><span class="token sort_Id">okOptMessageParameterList</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#OptMessageParameterList_583_606" id="OptMessageParameterList_1017_1040" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 37"><span class="token sort_Id">OptMessageParameterList</span></a></span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../statics-names.stx/#TypeDataClass_449_462" id="TypeDataClass_1049_1062" title="Defined at ../statics-names.stx line 19"><span class="token sort_Id">TypeDataClass</span></a></span><span class="operator">)</span>
    <a href="#okOptMessageParameterList_981_1006" id="okOptMessageParameterList_1068_1093" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_1094_1095" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#MessageParameters_5083_5100" id="MessageParameters_1097_1114" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 134"><span class="token sort_Id">MessageParameters</span></a><span class="operator">(</span><span class="cons_Var"><span id="types_1115_1120" title="Not referenced locally, nor via imports"><span class="token sort_Id">types</span></span></span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="../statics-names.stx/#typeOfDataClasses_3216_3233" id="typeOfDataClasses_1125_1142" title="Defined at ../statics-names.stx line 80"><span class="token sort_Id">typeOfDataClasses</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var">types</span><span class="operator">).</span>
    <a href="#okOptMessageParameterList_981_1006" id="okOptMessageParameterList_1158_1183" title="Defined at line 28"><span class="token sort_Id">okOptMessageParameterList</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_1184_1185" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#NoMessageParameters_5143_5162" id="NoMessageParameters_1187_1206" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 135"><span class="token sort_Id">NoMessageParameters</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[].</span>

<span class="keyword">rules</span> <span class="layout">// === Instances and channels =======</span>

    <a href="../statics.stx/#okInstances_3044_3055" id="okInstances_1266_1277" title="Referenced at ../statics.stx line 63, 68"><span class="token sort_Id">okInstances</span></a> <span class="keyword">maps</span> <a href="#okInstance_1310_1320" id="okInstance_1283_1293" title="Defined at line 35"><span class="token sort_Id">okInstance</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okInstance_1283_1293" id="okInstance_1310_1320" title="Referenced at line 34, 36"><span class="token sort_Id">okInstance</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Instance_628_636" id="Instance_1331_1339" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 39"><span class="token sort_Id">Instance</span></a></span>
    <a href="#okInstance_1310_1320" id="okInstance_1344_1354" title="Defined at line 35"><span class="token sort_Id">okInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1473_1474" id="s_1355_1356" title="Referenced at line 37, 38, 39"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Instance_5416_5424" id="Instance_1358_1366" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 139"><span class="token sort_Id">Instance</span></a><span class="operator">(</span><span class="cons_Var"><span id="annotationList_1367_1381" title="Not referenced locally, nor via imports"><span class="token sort_Id">annotationList</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_1511_1515" id="name_1383_1387" title="Referenced at line 38"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#class_1476_1481" id="class_1389_1394" title="Referenced at line 37"><span class="token sort_Id">class</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#optParameterInstantiations_1628_1654" id="optParameterInstantiations_1396_1422" title="Referenced at line 39"><span class="token sort_Id">optParameterInstantiations</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_1440_1441" id="T_1437_1438" title="Referenced at line 37, 38, 39"><span class="token sort_Id">T</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_1437_1438" id="T_1440_1441" title="Defined at line 37"><span class="token sort_Id">T</span></a></span> <span class="operator">==</span> <a href="../statics-names.stx/#typeOfProcessOrClusterClass_2371_2398" id="typeOfProcessOrClusterClass_1445_1472" title="Defined at ../statics-names.stx line 61"><span class="token sort_Id">typeOfProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1355_1356" id="s_1473_1474" title="Defined at line 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#class_1389_1394" id="class_1476_1481" title="Defined at line 36"><span class="token sort_Id">class</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#declareInstance_12548_12563" id="declareInstance_1492_1507" title="Defined at ../statics-names.stx line 258"><span class="token sort_Id">declareInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1355_1356" id="s_1508_1509" title="Defined at line 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_1383_1387" id="name_1511_1515" title="Defined at line 36"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#T_1437_1438" id="T_1517_1518" title="Defined at line 37"><span class="token sort_Id">T</span></a></span><span class="operator">),</span>
        <a href="#okInstanceParameters_1663_1683" id="okInstanceParameters_1529_1549" title="Defined at line 41"><span class="token sort_Id">okInstanceParameters</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1355_1356" id="s_1550_1551" title="Defined at line 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="#externalScopeOfTypeProcessOrClusterClass_3192_3232" id="externalScopeOfTypeProcessOrClusterClass_1553_1593" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_1437_1438" id="T_1594_1595" title="Defined at line 37"><span class="token sort_Id">T</span></a></span><span class="operator">),</span> <a href="../statics-opt.stx/#stripOptInstanceParameterList_303_332" id="stripOptInstanceParameterList_1598_1627" title="Defined at ../statics-opt.stx line 13"><span class="token sort_Id">stripOptInstanceParameterList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#optParameterInstantiations_1396_1422" id="optParameterInstantiations_1628_1654" title="Defined at line 36"><span class="token sort_Id">optParameterInstantiations</span></a></span><span class="operator">)).</span>

    <a href="#okInstanceParameters_1529_1549" id="okInstanceParameters_1663_1683" title="Referenced at line 39"><span class="token sort_Id">okInstanceParameters</span></a> <span class="keyword">maps</span> <a href="#okInstanceParameter_1728_1747" id="okInstanceParameter_1689_1708" title="Defined at line 42"><span class="token sort_Id">okInstanceParameter</span></a><span class="operator">(*,</span> <span class="operator">*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okInstanceParameter_1689_1708" id="okInstanceParameter_1728_1747" title="Referenced at line 41, 43"><span class="token sort_Id">okInstanceParameter</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#InstanceParameter_670_687" id="InstanceParameter_1766_1783" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 41"><span class="token sort_Id">InstanceParameter</span></a></span>
    <a href="#okInstanceParameter_1728_1747" id="okInstanceParameter_1788_1807" title="Defined at line 42"><span class="token sort_Id">okInstanceParameter</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1956_1957" id="s_1808_1809" title="Referenced at line 45"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_instance_1897_1907" id="s_instance_1811_1821" title="Referenced at line 44"><span class="token sort_Id">s_instance</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#InstanceParameter_5624_5641" id="InstanceParameter_1823_1840" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 142"><span class="token sort_Id">InstanceParameter</span></a><span class="operator">(</span><span class="cons_Var"><a href="#name_1909_1913" id="name_1841_1845" title="Referenced at line 44"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#expr_1980_1984" id="expr_1847_1851" title="Referenced at line 45, 46"><span class="token sort_Id">expr</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_var_1873_1878" id="T_var_1866_1871" title="Referenced at line 44, 46"><span class="token sort_Id">T_var</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_var_1866_1871" id="T_var_1873_1878" title="Defined at line 44"><span class="token sort_Id">T_var</span></a></span> <span class="operator">==</span> <a href="../statics-names.stx/#typeOfVariable_14347_14361" id="typeOfVariable_1882_1896" title="Defined at ../statics-names.stx line 304"><span class="token sort_Id">typeOfVariable</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_instance_1811_1821" id="s_instance_1897_1907" title="Defined at line 43"><span class="token sort_Id">s_instance</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_1841_1845" id="name_1909_1913" title="Defined at line 43"><span class="token sort_Id">name</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_expr_1933_1939" id="T_expr_1925_1931" title="Referenced at line 45, 46"><span class="token sort_Id">T_expr</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_expr_1925_1931" id="T_expr_1933_1939" title="Defined at line 45"><span class="token sort_Id">T_expr</span></a></span> <span class="operator">==</span> <a href="../statics-expr-stat.stx/#okExpression_6990_7002" id="okExpression_1943_1955" title="Defined at ../statics-expr-stat.stx line 129"><span class="token sort_Id">okExpression</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1808_1809" id="s_1956_1957" title="Defined at line 43"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../statics-names.stx/#TypeDataClassRoot_484_501" id="TypeDataClassRoot_1959_1976" title="Defined at ../statics-names.stx line 20"><span class="token sort_Id">TypeDataClassRoot</span></a>()</span><span class="operator">,</span> <span class="cons_Var"><a href="#expr_1847_1851" id="expr_1980_1984" title="Defined at line 43"><span class="token sort_Id">expr</span></a></span><span class="operator">),</span>
        <span class="keyword">try</span> <span class="operator">{</span> <a href="../statics-typing.stx/#compatibleType_233_247" id="compatibleType_2001_2015" title="Defined at ../statics-typing.stx line 13"><span class="token sort_Id">compatibleType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_var_1866_1871" id="T_var_2016_2021" title="Defined at line 44"><span class="token sort_Id">T_var</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#T_expr_1925_1931" id="T_expr_2023_2029" title="Defined at line 45"><span class="token sort_Id">T_expr</span></a></span><span class="operator">)</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">Incompatible type</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#expr_1847_1851" id="expr_2065_2069" title="Defined at line 43"><span class="token sort_Id">expr</span></a></span><span class="operator">.</span>

    <a href="../statics.stx/#okChannels_3088_3098" id="okChannels_2076_2086" title="Referenced at ../statics.stx line 64, 69"><span class="token sort_Id">okChannels</span></a> <span class="keyword">maps</span> <a href="#okChannel_2118_2127" id="okChannel_2092_2101" title="Defined at line 49"><span class="token sort_Id">okChannel</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okChannel_2092_2101" id="okChannel_2118_2127" title="Referenced at line 48, 50"><span class="token sort_Id">okChannel</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Channel_708_715" id="Channel_2138_2145" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 43"><span class="token sort_Id">Channel</span></a></span>
    <a href="#okChannel_2118_2127" id="okChannel_2150_2159" title="Defined at line 49"><span class="token sort_Id">okChannel</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2423_2424" id="s_2160_2161" title="Referenced at line 53, 54"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#Channel_5732_5739" id="Channel_2163_2170" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 144"><span class="token sort_Id">Channel</span></a><span class="operator">(</span><span class="cons_Var"><span id="annotationList_2171_2185" title="Not referenced locally, nor via imports"><span class="token sort_Id">annotationList</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstanceList_5791_5807" id="PortInstanceList_2187_2203" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 145"><span class="token sort_Id">PortInstanceList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#portInstances_2288_2301" id="portInstances_2204_2217" title="Referenced at line 51, 53, 54"><span class="token sort_Id">portInstances</span></a></span>)</span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#count_ext_ports_2250_2265" id="count_ext_ports_2233_2248" title="Referenced at line 51, 52, 54"><span class="token sort_Id">count_ext_ports</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#count_ext_ports_2233_2248" id="count_ext_ports_2250_2265" title="Defined at line 51"><span class="token sort_Id">count_ext_ports</span></a></span> <span class="operator">==</span> <a href="#countExternalPorts_3472_3490" id="countExternalPorts_2269_2287" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">(</span><span class="cons_Var"><a href="#portInstances_2204_2217" id="portInstances_2288_2301" title="Defined at line 50"><span class="token sort_Id">portInstances</span></a></span><span class="operator">),</span>
        <span class="keyword">try</span> <span class="operator">{</span> <a href="#atMostOne_3746_3755" id="atMostOne_2318_2327" title="Defined at line 86"><span class="token sort_Id">atMostOne</span></a><span class="operator">(</span><span class="cons_Var"><a href="#count_ext_ports_2233_2248" id="count_ext_ports_2328_2343" title="Defined at line 51"><span class="token sort_Id">count_ext_ports</span></a></span><span class="operator">)</span> <span class="operator">}</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">There should be at most 1 external port</span><span class="operator">],</span>
        <a href="#okPortInstances_2727_2742" id="okPortInstances_2407_2422" title="Defined at line 62"><span class="token sort_Id">okPortInstances</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2160_2161" id="s_2423_2424" title="Defined at line 50"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portInstances_2204_2217" id="portInstances_2426_2439" title="Defined at line 50"><span class="token sort_Id">portInstances</span></a></span><span class="operator">),</span>
        <a href="#okChannelClosure_2508_2524" id="okChannelClosure_2450_2466" title="Defined at line 56"><span class="token sort_Id">okChannelClosure</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2160_2161" id="s_2467_2468" title="Defined at line 50"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portInstances_2204_2217" id="portInstances_2470_2483" title="Defined at line 50"><span class="token sort_Id">portInstances</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#count_ext_ports_2233_2248" id="count_ext_ports_2485_2500" title="Defined at line 51"><span class="token sort_Id">count_ext_ports</span></a></span><span class="operator">).</span>

    <a href="#okChannelClosure_2450_2466" id="okChannelClosure_2508_2524" title="Referenced at line 54, 57, 58"><span class="token sort_Id">okChannelClosure</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstance_720_732" id="PortInstance_2540_2552" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 44"><span class="token sort_Id">PortInstance</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_IntSort">int</span>
    <a href="#okChannelClosure_2508_2524" id="okChannelClosure_2564_2580" title="Defined at line 56"><span class="token sort_Id">okChannelClosure</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_2581_2582" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="pis_2584_2587" title="Not referenced locally, nor via imports"><span class="token sort_Id">pis</span></span></span><span class="operator">,</span> 0<span class="operator">).</span>
    <a href="#okChannelClosure_2508_2524" id="okChannelClosure_2597_2613" title="Defined at line 56"><span class="token sort_Id">okChannelClosure</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_2614_2615" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="pis_2617_2620" title="Not referenced locally, nor via imports"><span class="token sort_Id">pis</span></span></span><span class="operator">,</span> <span class="operator">_).</span>
        <span class="layout">// TODO check unconnected messages</span>
        <span class="layout">// TODO check type compatibility of messages</span>

    <a href="#okPortInstances_2407_2422" id="okPortInstances_2727_2742" title="Referenced at line 53"><span class="token sort_Id">okPortInstances</span></a> <span class="keyword">maps</span> <a href="#okPortInstance_2779_2793" id="okPortInstance_2748_2762" title="Defined at line 63"><span class="token sort_Id">okPortInstance</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
    <a href="#okPortInstance_2748_2762" id="okPortInstance_2779_2793" title="Referenced at line 62, 64, 68"><span class="token sort_Id">okPortInstance</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstance_720_732" id="PortInstance_2804_2816" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 44"><span class="token sort_Id">PortInstance</span></a></span>
    <a href="#okPortInstance_2779_2793" id="okPortInstance_2821_2835" title="Defined at line 63"><span class="token sort_Id">okPortInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2930_2931" id="s_2836_2837" title="Referenced at line 65"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#InternalPort_5853_5865" id="InternalPort_2839_2851" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 146"><span class="token sort_Id">InternalPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#instanceName_2933_2945" id="instanceName_2852_2864" title="Referenced at line 65"><span class="token sort_Id">instanceName</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portName_3087_3095" id="portName_2866_2874" title="Referenced at line 67"><span class="token sort_Id">portName</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_instance_2901_2911" id="T_instance_2889_2899" title="Referenced at line 65, 66"><span class="token sort_Id">T_instance</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_instance_2889_2899" id="T_instance_2901_2911" title="Defined at line 65"><span class="token sort_Id">T_instance</span></a></span> <span class="operator">==</span> <a href="../statics-names.stx/#typeOfInstance_12811_12825" id="typeOfInstance_2915_2929" title="Defined at ../statics-names.stx line 264"><span class="token sort_Id">typeOfInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2836_2837" id="s_2930_2931" title="Defined at line 64"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#instanceName_2852_2864" id="instanceName_2933_2945" title="Defined at line 64"><span class="token sort_Id">instanceName</span></a></span><span class="operator">),</span>
        <span class="operator">{</span><span class="cons_Var"><a href="#T_instance_scope_2975_2991" id="T_instance_scope_2957_2973" title="Referenced at line 66, 67"><span class="token sort_Id">T_instance_scope</span></a></span><span class="operator">}</span> <span class="cons_Var"><a href="#T_instance_scope_2957_2973" id="T_instance_scope_2975_2991" title="Defined at line 66"><span class="token sort_Id">T_instance_scope</span></a></span> <span class="operator">==</span>  <a href="#externalScopeOfTypeProcessOrClusterClass_3192_3232" id="externalScopeOfTypeProcessOrClusterClass_2996_3036" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_instance_2889_2899" id="T_instance_3037_3047" title="Defined at line 65"><span class="token sort_Id">T_instance</span></a></span><span class="operator">),</span>
        <a href="../statics-names.stx/#typeOfPort_13499_13509" id="typeOfPort_3058_3068" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T_instance_scope_2957_2973" id="T_instance_scope_3069_3085" title="Defined at line 66"><span class="token sort_Id">T_instance_scope</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portName_2866_2874" id="portName_3087_3095" title="Defined at line 64"><span class="token sort_Id">portName</span></a></span><span class="operator">).</span>
    <a href="#okPortInstance_2779_2793" id="okPortInstance_3102_3116" title="Defined at line 63"><span class="token sort_Id">okPortInstance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3166_3167" id="s_3117_3118" title="Referenced at line 69"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#ExternalPort_5896_5908" id="ExternalPort_3120_3132" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 147"><span class="token sort_Id">ExternalPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#portName_3169_3177" id="portName_3133_3141" title="Referenced at line 69"><span class="token sort_Id">portName</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span>
        <a href="../statics-names.stx/#typeOfPort_13499_13509" id="typeOfPort_3155_3165" title="Defined at ../statics-names.stx line 283"><span class="token sort_Id">typeOfPort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3117_3118" id="s_3166_3167" title="Defined at line 68"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#portName_3133_3141" id="portName_3169_3177" title="Defined at line 68"><span class="token sort_Id">portName</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span>

    <a href="#externalScopeOfTypeProcessOrClusterClass_1553_1593" id="externalScopeOfTypeProcessOrClusterClass_3192_3232" title="Referenced at line 39, 66, 74, 75"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="../statics-names.stx/#TypeProcessOrClusterClass_210_235" id="TypeProcessOrClusterClass_3235_3260" title="Defined at ../statics-names.stx line 14"><span class="token sort_Id">TypeProcessOrClusterClass</span></a></span> <span class="operator">-&gt;</span> <span class="cons_ScopeSort">scope</span>
    <a href="#externalScopeOfTypeProcessOrClusterClass_3192_3232" id="externalScopeOfTypeProcessOrClusterClass_3274_3314" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Op"><a href="../statics-names.stx/#TypeClusterClass_257_273" id="TypeClusterClass_3315_3331" title="Defined at ../statics-names.stx line 15"><span class="token sort_Id">TypeClusterClass</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_external_3332_3342" title="Not referenced locally, nor via imports"><span class="token sort_Id">s_external</span></span></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var">s_external</span><span class="operator">.</span>
    <a href="#externalScopeOfTypeProcessOrClusterClass_3192_3232" id="externalScopeOfTypeProcessOrClusterClass_3363_3403" title="Defined at line 73"><span class="token sort_Id">externalScopeOfTypeProcessOrClusterClass</span></a><span class="operator">(</span><span class="cons_Op"><a href="../statics-names.stx/#TypeProcessClass_376_392" id="TypeProcessClass_3404_3420" title="Defined at ../statics-names.stx line 17"><span class="token sort_Id">TypeProcessClass</span></a><span class="operator">(</span><span class="cons_Var">s_external</span><span class="operator">,</span> <span class="cons_Var"><span id="s_internal_3433_3443" title="Not referenced locally, nor via imports"><span class="token sort_Id">s_internal</span></span></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><span id="s_external_3448_3458" title="Not referenced locally, nor via imports"><span class="token sort_Id">s_external</span></span></span><span class="operator">.</span>

<span class="keyword">rules</span>

    <a href="#countExternalPorts_2269_2287" id="countExternalPorts_3472_3490" title="Referenced at line 51, 80, 81, 82, 84"><span class="token sort_Id">countExternalPorts</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#PortInstance_720_732" id="PortInstance_3498_3510" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 44"><span class="token sort_Id">PortInstance</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_IntSort">int</span>
    <a href="#countExternalPorts_3472_3490" id="countExternalPorts_3523_3541" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">([])</span> <span class="operator">=</span> 0<span class="operator">.</span>
    <a href="#countExternalPorts_3472_3490" id="countExternalPorts_3555_3573" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">([</span><span class="cons_Op"><a href="../../src-gen/statix/signatures/Poosl-sig.stx/#ExternalPort_5896_5908" id="ExternalPort_3575_3587" title="Defined at ../../src-gen/statix/signatures/Poosl-sig.stx line 147"><span class="token sort_Id">ExternalPort</span></a>(_)</span><span class="operator">|</span><span class="cons_Var"><a href="#Cs_3649_3651" id="Cs_3591_3593" title="Referenced at line 82"><span class="token sort_Id">Cs</span></a></span><span class="operator">])</span> <span class="operator">=</span> <span class="cons_Var"><a href="#len_3662_3665" id="len_3598_3601" title="Referenced at line 83"><span class="token sort_Id">len</span></a></span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#t_len_3621_3626" id="t_len_3606_3611" title="Referenced at line 82"><span class="token sort_Id">t_len</span></a></span><span class="operator">}</span>
        <span class="cons_Var"><a href="#t_len_3606_3611" id="t_len_3621_3626" title="Defined at line 81"><span class="token sort_Id">t_len</span></a></span> <span class="operator">==</span> <a href="#countExternalPorts_3472_3490" id="countExternalPorts_3630_3648" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">(</span><span class="cons_Var"><a href="#Cs_3591_3593" id="Cs_3649_3651" title="Defined at line 81"><span class="token sort_Id">Cs</span></a></span><span class="operator">),</span>
        <span class="cons_Var"><a href="#len_3598_3601" id="len_3662_3665" title="Defined at line 81"><span class="token sort_Id">len</span></a></span> <span class="operator">#=</span> <span class="cons_Var">t_len</span> <span class="operator">+</span> 1<span class="operator">.</span>
    <a href="#countExternalPorts_3472_3490" id="countExternalPorts_3684_3702" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">([_|</span><span class="cons_Var"><span id="Cs_3706_3708" title="Not referenced locally, nor via imports"><span class="token sort_Id">Cs</span></span></span><span class="operator">])</span> <span class="operator">=</span> <a href="#countExternalPorts_3472_3490" id="countExternalPorts_3713_3731" title="Defined at line 79"><span class="token sort_Id">countExternalPorts</span></a><span class="operator">(</span><span class="cons_Var">Cs</span><span class="operator">).</span>
    
    <a href="#atMostOne_2318_2327" id="atMostOne_3746_3755" title="Referenced at line 52, 87, 88"><span class="token sort_Id">atMostOne</span></a> <span class="operator">:</span> <span class="cons_IntSort">int</span>
    <a href="#atMostOne_3746_3755" id="atMostOne_3766_3775" title="Defined at line 86"><span class="token sort_Id">atMostOne</span></a><span class="operator">(</span>0<span class="operator">).</span>
    <a href="#atMostOne_3746_3755" id="atMostOne_3784_3793" title="Defined at line 86"><span class="token sort_Id">atMostOne</span></a><span class="operator">(</span>1<span class="operator">).</span>

</code></pre></td></tr></tbody></table></div>